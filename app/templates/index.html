{% extends "base.html" %}
{% block titulo %}Dashboard{% endblock %}
{% block titulo_pagina %}Bem-vindo(a), {{ current_user.nome }}!{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <h5 class="card-title">Total de Pacientes</h5>
                <p class="card-text fs-2">{{ total_pacientes }}</p>
                <a href="{{ url_for('listar_pacientes') }}" class="btn btn-light btn-sm">Ver todos</a>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <h5 class="card-title">Sua Função</h5>
                <p class="card-text fs-2">{{ current_user.tipo_profissional }}</p>
                <a href="#" class="btn btn-light btn-sm">Detalhes</a>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card text-white bg-info">
            <div class="card-body">
                <h5 class="card-title">Consultas de Hoje</h5>
                <p class="card-text fs-2">0</p>
                <a href="#" class="btn btn-light btn-sm">Ver Agenda (A implementar)</a>
            </div>
        </div>
    </div>
</div>

<h3 class="mt-4">Pacientes Cadastrados Recentemente</h3>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Nome</th>
            <th>CPF</th>
            <th>Data Cadastro</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for paciente in pacientes_recentes %}
        <tr>
            <td>{{ paciente.nome }}</td>
            <td>{{ paciente.cpf }}</td>
            <td>{{ paciente.data_cadastro.strftime('%d/%m/%Y %H:%M') }}</td>
            <td>
                <a href="{{ url_for('ver_prontuario', paciente_id=paciente.id) }}"
                    class="btn btn-sm btn-outline-primary">Ver Prontuário</a>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4">Nenhum paciente recente.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}